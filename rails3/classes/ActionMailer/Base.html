<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: ActionMailer::Base [Rails Framework Documentation]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <div class='name'>
          <span class='type'>Class</span>
          ActionMailer::Base
        </div>
        <ol class='paths'>
          <li>
            <a href="../../files/vendor/gems/gems/actionmailer-3_0_0_beta/lib/action_mailer/base_rb.html">vendor/gems/gems/actionmailer-3.0.0.beta/lib/action_mailer/base.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>AbstractController::Base</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            Action Mailer allows you to send email from your application using a mailer
            model and views.
            </p>
            <h1>Mailer Models</h1>
            <p>
            To use Action Mailer, you need to create a mailer model.
            </p>
            <pre>$ script/generate mailer Notifier</pre>
            <p>
            The generated model inherits from <a
            href="Base.html">ActionMailer::Base</a>. Emails are defined by creating
            methods within the model which are then used to set variables to be used in
            the mail template, to change options on the mail, or to add attachments.
            </p>
            <p>
            Examples:
            </p>
            <pre>class Notifier &lt; ActionMailer::Base&#x000A;  default :from =&gt; 'no-reply@example.com',&#x000A;          :return_path =&gt; 'system@example.com'&#x000A;&#x000A;  def welcome(recipient)&#x000A;    @account = recipient&#x000A;    mail(:to =&gt; recipient.email_address_with_name,&#x000A;         :bcc =&gt; [&quot;bcc@example.com&quot;, &quot;Order Watcher &lt;watcher@example.com&gt;&quot;])&#x000A;    end&#x000A;  end</pre>
            <p>
            Within the mailer method, you have access to the following methods:
            </p>
            <ul>
            <li><tt>attachments[]=</tt> - Allows you to add attachments to your email in an
            intuitive manner; <tt><a href="http://'filename.png'">attachments</a> =
            File.read('path/to/filename.png')</tt>
            
            </li>
            <li><tt>headers[]=</tt> - Allows you to specify any header field in your email
            such as <tt>headers['X-No-Spam'] = 'True'</tt>. Note, while most fields
            (like <tt>To:</tt> <tt>From:</tt> can only appear once in an email header,
            other fields like <tt>X-Anything</tt> can appear multiple times. If you
            want to change a field that can appear multiple times, you need to set it
            to nil first so that Mail knows you are replacing it, not adding another
            field of the same name.)
            
            </li>
            <li><tt>headers(hash)</tt> - Allows you to specify multiple headers in your
            email such as <tt>headers({'X-No-Spam' =&gt; 'True', 'In-Reply-To' =&gt;
            '1234@message.id'})</tt>
            
            </li>
            <li><tt>mail</tt> - Allows you to specify your email to send.
            
            </li>
            </ul>
            <p>
            The hash passed to the mail method allows you to specify any header that a
            Mail::Message will accept (any valid Email header including optional
            fields).
            </p>
            <p>
            The mail method, if not passed a block, will inspect your views and send
            all the views with the same name as the method, so the above action would
            send the <tt>welcome.text.plain.erb</tt> view file as well as the
            <tt>welcome.text.html.erb</tt> view file in a
            <tt>multipart/alternative</tt> email.
            </p>
            <p>
            If you want to explicitly render only certain templates, pass a block:
            </p>
            <pre>mail(:to =&gt; user.emai) do |format|&#x000A;  format.text&#x000A;  format.html&#x000A;end</pre>
            <p>
            The block syntax is useful if also need to specify information specific to
            a part:
            </p>
            <pre>mail(:to =&gt; user.emai) do |format|&#x000A;  format.text(:content_transfer_encoding =&gt; &quot;base64&quot;)&#x000A;  format.html&#x000A;end</pre>
            <p>
            Or even to render a special view:
            </p>
            <pre>mail(:to =&gt; user.emai) do |format|&#x000A;  format.text&#x000A;  format.html { render &quot;some_other_template&quot; }&#x000A;end</pre>
            <h1>Mailer views</h1>
            <p>
            Like Action Controller, each mailer class has a corresponding view
            directory in which each method of the class looks for a template with its
            name.
            </p>
            <p>
            To define a template to be used with a mailing, create an <tt>.erb</tt>
            file with the same name as the method in your mailer model. For example, in
            the mailer defined above, the template at
            <tt>app/views/notifier/signup_notification.text.plain.erb</tt> would be
            used to generate the email.
            </p>
            <p>
            Variables defined in the model are accessible as instance variables in the
            view.
            </p>
            <p>
            Emails by default are sent in plain text, so a sample view for our model
            example might look like this:
            </p>
            <pre>Hi &lt;%= @account.name %&gt;,&#x000A;Thanks for joining our service! Please check back often.</pre>
            <p>
            You can even use Action Pack helpers in these views. For example:
            </p>
            <pre>You got a new note!&#x000A;&lt;%= truncate(@note.body, 25) %&gt;</pre>
            <p>
            If you need to access the subject, from or the recipients in the view, you
            can do that through message object:
            </p>
            <pre>You got a new note from &lt;%= message.from %&gt;!&#x000A;&lt;%= truncate(@note.body, 25) %&gt;</pre>
            <h1>Generating URLs</h1>
            <p>
            URLs can be generated in mailer views using <tt>url_for</tt> or named
            routes. Unlike controllers from Action Pack, the mailer instance
            doesn&#8217;t have any context about the incoming request, so you&#8217;ll
            need to provide all of the details needed to generate a URL.
            </p>
            <p>
            When using <tt>url_for</tt> you&#8217;ll need to provide the
            <tt>:host</tt>, <tt>:controller</tt>, and <tt>:action</tt>:
            </p>
            <pre>&lt;%= url_for(:host =&gt; &quot;example.com&quot;, :controller =&gt; &quot;welcome&quot;, :action =&gt; &quot;greeting&quot;) %&gt;</pre>
            <p>
            When using named routes you only need to supply the <tt>:host</tt>:
            </p>
            <pre>&lt;%= users_url(:host =&gt; &quot;example.com&quot;) %&gt;</pre>
            <p>
            You will want to avoid using the <tt>name_of_route_path</tt> form of named
            routes because it doesn&#8217;t make sense to generate relative URLs in
            email messages.
            </p>
            <p>
            It is also possible to set a default host that will be used in all mailers
            by setting the <tt>:host</tt> option in the
            <tt>ActionMailer::Base.default_url_options</tt> hash as follows:
            </p>
            <pre>ActionMailer::Base.default_url_options[:host] = &quot;example.com&quot;</pre>
            <p>
            This can also be set as a configuration option in
            <tt>config/environment.rb</tt>:
            </p>
            <pre>config.action_mailer.default_url_options = { :host =&gt; &quot;example.com&quot; }</pre>
            <p>
            If you do decide to set a default <tt>:host</tt> for your mailers you will
            want to use the <tt>:only_path =&gt; false</tt> option when using
            <tt>url_for</tt>. This will ensure that absolute URLs are generated because
            the <tt>url_for</tt> view helper will, by default, generate relative URLs
            when a <tt>:host</tt> option isn&#8217;t explicitly provided.
            </p>
            <h1>Sending mail</h1>
            <p>
            Once a mailer action and template are defined, you can deliver your message
            or create it and save it for delivery later:
            </p>
            <pre>Notifier.welcome(david).deliver # sends the email&#x000A;mail = Notifier.welcome(david)  # =&gt; a Mail::Message object&#x000A;mail.deliver                    # sends the email</pre>
            <p>
            You never instantiate your mailer class. Rather, you just call the method
            you defined on the class itself.
            </p>
            <h1>Multipart Emails</h1>
            <p>
            Multipart messages can also be used implicitly because Action Mailer will
            automatically detect and use multipart templates, where each template is
            named after the name of the action, followed by the content type. Each such
            detected template will be added as separate part to the message.
            </p>
            <p>
            For example, if the following templates existed:
            </p>
            <ul>
            <li>signup_notification.text.plain.erb
            
            </li>
            <li>signup_notification.text.html.erb
            
            </li>
            <li>signup_notification.text.xml.builder
            
            </li>
            <li>signup_notification.text.yaml.erb
            
            </li>
            </ul>
            <p>
            Each would be rendered and added as a separate part to the message, with
            the corresponding content type. The content type for the entire message is
            automatically set to <tt>multipart/alternative</tt>, which indicates that
            the email contains multiple different representations of the same email
            body. The same instance variables defined in the action are passed to all
            email templates.
            </p>
            <p>
            Implicit template rendering is not performed if any attachments or parts
            have been added to the email. This means that you&#8217;ll have to manually
            add each part to the email and set the content type of the email to
            <tt>multipart/alternative</tt>.
            </p>
            <h1>Attachments</h1>
            <p>
            You can see above how to make a multipart HTML / Text email, to send
            attachments is just as easy:
            </p>
            <pre>class ApplicationMailer &lt; ActionMailer::Base&#x000A;  def welcome(recipient)&#x000A;    attachments['free_book.pdf'] = { :data =&gt; File.read('path/to/file.pdf') }&#x000A;    mail(:to =&gt; recipient, :subject =&gt; &quot;New account information&quot;)&#x000A;  end&#x000A;end</pre>
            <p>
            Which will (if it had both a <tt>welcome.text.plain.erb</tt> and
            <tt>welcome.text.html.erb</tt> tempalte in the view directory), send a
            complete <tt>multipart/mixed</tt> email with two parts, the first part
            being a <tt>multipart/alternative</tt> with the text and HTML email parts
            inside, and the second being a <tt>application/pdf</tt> with a Base64
            encoded copy of the file.pdf book with the filename <tt>free_book.pdf</tt>.
            </p>
            <h1>Configuration options</h1>
            <p>
            These options are specified on the class level, like
            <tt>ActionMailer::Base.template_root = &quot;/my/templates&quot;</tt>
            </p>
            <ul>
            <li><tt>default</tt> - This is a class wide hash of <tt>:key =&gt; value</tt>
            pairs containing default values for the specified header fields of the
            <tt>Mail::Message</tt>. You can specify a default for any valid header for
            <tt>Mail::Message</tt> and it will be used if you do not override it. You
            pass in the header value as a symbol, all lower case with under scores
            instead of hyphens, so <tt>Content-Transfer-Encoding:</tt> becomes
            <tt>:content_transfer_encoding</tt>. The defaults set by Action Mailer are:
            
            <ul>
            <li><tt>:mime_version =&gt; &quot;1.0&quot;</tt>
            
            </li>
            <li><tt>:charset =&gt; &quot;utf-8&quot;,</tt>
            
            </li>
            <li><tt>:content_type =&gt; &quot;text/plain&quot;,</tt>
            
            </li>
            <li><tt>:parts_order =&gt; [ &quot;text/plain&quot;, &quot;text/enriched&quot;,
            &quot;text/html&quot; ]</tt>
            
            </li>
            </ul>
            </li>
            <li><tt>logger</tt> - the logger is used for generating information on the
            mailing run if available. Can be set to nil for no logging. Compatible with
            both Ruby&#8217;s own Logger and Log4r loggers.
            
            </li>
            <li><tt>smtp_settings</tt> - Allows detailed configuration for <tt>:smtp</tt>
            delivery method:
            
            <ul>
            <li><tt>:address</tt> - Allows you to use a remote mail server. Just change it
            from its default &#8220;localhost&#8221; setting.
            
            </li>
            <li><tt>:port</tt> - On the off chance that your mail server doesn&#8217;t run
            on port 25, you can change it.
            
            </li>
            <li><tt>:domain</tt> - If you need to specify a HELO domain, you can do it
            here.
            
            </li>
            <li><tt>:user_name</tt> - If your mail server requires authentication, set the
            username in this setting.
            
            </li>
            <li><tt>:password</tt> - If your mail server requires authentication, set the
            password in this setting.
            
            </li>
            <li><tt>:authentication</tt> - If your mail server requires authentication, you
            need to specify the authentication type here. This is a symbol and one of
            <tt>:plain</tt>, <tt>:login</tt>, <tt>:cram_md5</tt>.
            
            </li>
            <li><tt>:enable_starttls_auto</tt> - When set to true, detects if STARTTLS is
            enabled in your SMTP server and starts to use it.
            
            </li>
            </ul>
            </li>
            <li><tt>sendmail_settings</tt> - Allows you to override options for the
            <tt>:sendmail</tt> delivery method.
            
            <ul>
            <li><tt>:location</tt> - The location of the sendmail executable. Defaults to
            <tt>/usr/sbin/sendmail</tt>.
            
            </li>
            <li><tt>:arguments</tt> - The command line arguments. Defaults to <tt>-i
            -t</tt> with <tt>-f sender@addres</tt> added automatically before the
            message is sent.
            
            </li>
            </ul>
            </li>
            <li><tt>file_settings</tt> - Allows you to override options for the
            <tt>:file</tt> delivery method.
            
            <ul>
            <li><tt>:location</tt> - The directory into which emails will be written.
            Defaults to the application <tt>tmp/mails</tt>.
            
            </li>
            </ul>
            </li>
            <li><tt>raise_delivery_errors</tt> - Whether or not errors should be raised if
            the email fails to be delivered.
            
            </li>
            <li><tt>delivery_method</tt> - Defines a delivery method. Possible values are
            <tt>:smtp</tt> (default), <tt>:sendmail</tt>, <tt>:test</tt>, and
            <tt>:file</tt>. Or you may provide a custom delivery method object eg.
            MyOwnDeliveryMethodClass.new. See the Mail gem documentation on the
            interface you need to implement for a custom delivery agent.
            
            </li>
            <li><tt>perform_deliveries</tt> - Determines whether emails are actually sent
            from Action Mailer when you call <tt>.deliver</tt> on an mail message or on
            an Action Mailer method. This is on by default but can be turned off to aid
            in functional testing.
            
            </li>
            <li><tt>deliveries</tt> - Keeps an array of all the emails sent out through the
            Action Mailer with <tt>delivery_method :test</tt>. Most useful for unit and
            functional testing.
            
            </li>
            <li><tt>default_charset</tt> - This is now deprecated, use the <tt>default</tt>
            method above to set the default <tt>:charset</tt>.
            
            </li>
            <li><tt>default_content_type</tt> - This is now deprecated, use the
            <tt>default</tt> method above to set the default <tt>:content_type</tt>.
            
            </li>
            <li><tt>default_mime_version</tt> - This is now deprecated, use the
            <tt>default</tt> method above to set the default <tt>:mime_version</tt>.
            
            </li>
            <li><tt>default_implicit_parts_order</tt> - This is now deprecated, use the
            <tt>default</tt> method above to set the default <tt>:parts_order</tt>.
            Parts Order is used when a message is built implicitly (i.e. multiple parts
            are assembled from templates which specify the content type in their
            filenames) this variable controls how the parts are ordered.
            
            </li>
            </ul>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000169">default</a></li>
              <li><a href="#M000168">mailer_name</a></li>
              <li><a href="#M000171">new</a></li>
              <li><a href="#M000170">receive</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000173">attachments</a></li>
              <li><a href="#M000172">headers</a></li>
              <li><a href="#M000174">mail</a></li>
            </ol>
            <h3>protected instance</h3>
            <ol>
              <li><a href="#M000175">set_content_type</a></li>
            </ol>
          </div>
          <div id='context'>
            <div id='includes'>
              <h2>Included modules</h2>
              <ol>
                <li>DeliveryMethods</li>
                <li>Quoting</li>
                <li>AbstractController::Logger</li>
                <li>AbstractController::Rendering</li>
                <li>AbstractController::LocalizedCache</li>
                <li>AbstractController::Layouts</li>
                <li>AbstractController::Helpers</li>
                <li>AbstractController::Translation</li>
                <li>AbstractController::Compatibility</li>
                <li>ActionMailer::OldApi</li>
                <li>ActionMailer::DeprecatedApi</li>
              </ol>
            </div>
          </div>
          <div id='section'>
            <div id='aliases-list'>
              <h2>External Aliases</h2>
              <div class='name-list'>
                <table summary='External aliases'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>mailer_name</td>
                    <td>-&gt;</td>
                    <td class='context-item-value'>controller_path</td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>mailer_name</td>
                    <td class='context-item-value'>[W]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='method public-class' id='method-M000169'>
                <a name='M000169'></a>
                <div class='synopsis'>
                  <span class='name'>default</span>
                  <span class='arguments'>(value = nil)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000169-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000169-source'>     <span class="ruby-comment cmt"># File vendor/gems/gems/actionmailer-3.0.0.beta/lib/action_mailer/base.rb, line 287</span>&#x000A;287:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">default</span>(<span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>)&#x000A;288:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">default_params</span> = <span class="ruby-identifier">default_params</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">value</span>).<span class="ruby-identifier">freeze</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>&#x000A;289:         <span class="ruby-identifier">default_params</span>&#x000A;290:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000168'>
                <a name='M000168'></a>
                <div class='synopsis'>
                  <span class='name'>mailer_name</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000168-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000168-source'>     <span class="ruby-comment cmt"># File vendor/gems/gems/actionmailer-3.0.0.beta/lib/action_mailer/base.rb, line 281</span>&#x000A;281:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mailer_name</span>&#x000A;282:         <span class="ruby-ivar">@mailer_name</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">underscore</span>&#x000A;283:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000171'>
                <a name='M000171'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(method_name=nil, *args)</span>
                </div>
                <div class='description'>
                  <p>
                  Instantiate a new mailer object. If <tt>method_name</tt> is not
                  <tt>nil</tt>, the mailer will be initialized according to the named method.
                  If not, the mailer will remain uninitialized (useful when you only need to
                  invoke the &#8220;receive&#8221; method, for instance).
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000171-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000171-source'>     <span class="ruby-comment cmt"># File vendor/gems/gems/actionmailer-3.0.0.beta/lib/action_mailer/base.rb, line 355</span>&#x000A;355:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">method_name</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)&#x000A;356:       <span class="ruby-keyword kw">super</span>()&#x000A;357:       <span class="ruby-ivar">@_message</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>&#x000A;358:       <span class="ruby-identifier">process</span>(<span class="ruby-identifier">method_name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method_name</span>&#x000A;359:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000170'>
                <a name='M000170'></a>
                <div class='synopsis'>
                  <span class='name'>receive</span>
                  <span class='arguments'>(raw_mail)</span>
                </div>
                <div class='description'>
                  <p>
                  Receives a raw email, parses it into an email object, decodes it,
                  instantiates a new mailer, and passes the email object to the mailer
                  object&#8217;s <tt>receive</tt> method. If you want your mailer to be able
                  to process incoming messages, you&#8217;ll need to implement a
                  <tt>receive</tt> method that accepts the raw email string as a parameter:
                  </p>
                  <pre>class MyMailer &lt; ActionMailer::Base&#x000A;  def receive(mail)&#x000A;    ...&#x000A;  end&#x000A;end</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000170-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000170-source'>     <span class="ruby-comment cmt"># File vendor/gems/gems/actionmailer-3.0.0.beta/lib/action_mailer/base.rb, line 303</span>&#x000A;303:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">receive</span>(<span class="ruby-identifier">raw_mail</span>)&#x000A;304:         <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Notifications</span>.<span class="ruby-identifier">instrument</span>(<span class="ruby-value str">&quot;action_mailer.receive&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">payload</span><span class="ruby-operator">|</span>&#x000A;305:           <span class="ruby-identifier">mail</span> = <span class="ruby-constant">Mail</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">raw_mail</span>)&#x000A;306:           <span class="ruby-identifier">set_payload_for_mail</span>(<span class="ruby-identifier">payload</span>, <span class="ruby-identifier">mail</span>)&#x000A;307:           <span class="ruby-identifier">new</span>.<span class="ruby-identifier">receive</span>(<span class="ruby-identifier">mail</span>)&#x000A;308:         <span class="ruby-keyword kw">end</span>&#x000A;309:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000173'>
                <a name='M000173'></a>
                <div class='synopsis'>
                  <span class='name'>attachments</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Allows you to add attachments to an email, like so:
                  </p>
                  <pre>mail.attachments['filename.jpg'] = File.read('/path/to/filename.jpg')</pre>
                  <p>
                  If you do this, then Mail will take the file name and work out the mime
                  type set the Content-Type, Content-Disposition, Content-Transfer-Encoding
                  and base64 encode the contents of the attachment all for you.
                  </p>
                  <p>
                  You can also specify overrides if you want by passing a hash instead of a
                  string:
                  </p>
                  <pre>mail.attachments['filename.jpg'] = {:mime_type =&gt; 'application/x-gzip',&#x000A;                                    :content =&gt; File.read('/path/to/filename.jpg')}</pre>
                  <p>
                  If you want to use a different encoding than Base64, you can pass an
                  encoding in, but then it is up to you to pass in the content pre-encoded,
                  and don&#8217;t expect Mail to know how to decode this data:
                  </p>
                  <pre>file_content = SpecialEncode(File.read('/path/to/filename.jpg'))&#x000A;mail.attachments['filename.jpg'] = {:mime_type =&gt; 'application/x-gzip',&#x000A;                                    :encoding =&gt; 'SpecialEncoding',&#x000A;                                    :content =&gt; file_content }</pre>
                  <p>
                  You can also search for specific attachments:
                  </p>
                  <pre># By Filename&#x000A;mail.attachments['filename.jpg']   #=&gt; Mail::Part object or nil&#x000A;&#x000A;# or by index&#x000A;mail.attachments[0]                #=&gt; Mail::Part (first attachment)</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000173-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000173-source'>     <span class="ruby-comment cmt"># File vendor/gems/gems/actionmailer-3.0.0.beta/lib/action_mailer/base.rb, line 413</span>&#x000A;413:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attachments</span>&#x000A;414:       <span class="ruby-ivar">@_message</span>.<span class="ruby-identifier">attachments</span>&#x000A;415:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000172'>
                <a name='M000172'></a>
                <div class='synopsis'>
                  <span class='name'>headers</span>
                  <span class='arguments'>(args=nil)</span>
                </div>
                <div class='description'>
                  <p>
                  Allows you to pass random and unusual headers to the new +Mail::Message+
                  object which will add them to itself.
                  </p>
                  <pre>headers['X-Special-Domain-Specific-Header'] = &quot;SecretValue&quot;</pre>
                  <p>
                  You can also pass a hash into headers of header field names and values,
                  which will then be set on the Mail::Message object:
                  </p>
                  <pre>headers 'X-Special-Domain-Specific-Header' =&gt; &quot;SecretValue&quot;,&#x000A;        'In-Reply-To' =&gt; incoming.message_id</pre>
                  <p>
                  The resulting Mail::Message will have the following in it&#8217;s header:
                  </p>
                  <pre>X-Special-Domain-Specific-Header: SecretValue</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000172-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000172-source'>     <span class="ruby-comment cmt"># File vendor/gems/gems/actionmailer-3.0.0.beta/lib/action_mailer/base.rb, line 375</span>&#x000A;375:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">headers</span>(<span class="ruby-identifier">args</span>=<span class="ruby-keyword kw">nil</span>)&#x000A;376:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>&#x000A;377:         <span class="ruby-ivar">@_message</span>.<span class="ruby-identifier">headers</span>(<span class="ruby-identifier">args</span>)&#x000A;378:       <span class="ruby-keyword kw">else</span>&#x000A;379:         <span class="ruby-ivar">@_message</span>&#x000A;380:       <span class="ruby-keyword kw">end</span>&#x000A;381:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000174'>
                <a name='M000174'></a>
                <div class='synopsis'>
                  <span class='name'>mail</span>
                  <span class='arguments'>(headers={}, &amp;block)</span>
                </div>
                <div class='description'>
                  <p>
                  The main method that creates the message and renders the email templates.
                  There are two ways to call this method, with a block, or without a block.
                  </p>
                  <p>
                  Both methods accept a headers hash. This hash allows you to specify the
                  most used headers in an email message, these are:
                  </p>
                  <ul>
                  <li><tt>:subject</tt> - The subject of the message, if this is omitted,
                  ActionMailer will ask the <a href="../Rails.html">Rails</a> <a
                  href="../I18n.html">I18n</a> class for a translated <tt>:subject</tt> in
                  the scope of <tt>[:actionmailer, mailer_scope, action_name]</tt> or if this
                  is missing, will translate the humanized version of the
                  <tt>action_name</tt>
                  
                  </li>
                  <li><tt>:to</tt> - Who the message is destined for, can be a string of
                  addresses, or an array of addresses.
                  
                  </li>
                  <li><tt>:from</tt> - Who the message is from
                  
                  </li>
                  <li><tt>:cc</tt> - Who you would like to Carbon-Copy on this email, can be a
                  string of addresses, or an array of addresses.
                  
                  </li>
                  <li><tt>:bcc</tt> - Who you would like to Blind-Carbon-Copy on this email, can
                  be a string of addresses, or an array of addresses.
                  
                  </li>
                  <li><tt>:reply_to</tt> - Who to set the Reply-To header of the email to.
                  
                  </li>
                  <li><tt>:date</tt> - The date to say the email was sent on.
                  
                  </li>
                  </ul>
                  <p>
                  You can set default values for any of the above headers (except :date) by
                  using the <tt>default</tt> class method:
                  </p>
                  <pre>class Notifier &lt; ActionMailer::Base&#x000A;  self.default :from =&gt; 'no-reply@test.lindsaar.net',&#x000A;               :bcc =&gt; 'email_logger@test.lindsaar.net',&#x000A;               :reply_to =&gt; 'bounces@test.lindsaar.net'&#x000A;end</pre>
                  <p>
                  If you need other headers not listed above, use the <tt>headers['name'] =
                  value</tt> method.
                  </p>
                  <p>
                  When a <tt>:return_path</tt> is specified as header, that value will be
                  used as the &#8216;envelope from&#8217; address for the Mail message.
                  Setting this is useful when you want delivery notifications sent to a
                  different address than the one in <tt>:from</tt>. Mail will actually use
                  the <tt>:return_path</tt> in preference to the <tt>:sender</tt> in
                  preference to the <tt>:from</tt> field for the &#8216;envelope from&#8217;
                  value.
                  </p>
                  <p>
                  If you do not pass a block to the <tt>mail</tt> method, it will find all
                  templates in the template path that match the method name that it is being
                  called from, it will then create parts for each of these templates
                  intelligently, making educated guesses on correct content type and
                  sequence, and return a fully prepared Mail::Message ready to call
                  <tt>:deliver</tt> on to send.
                  </p>
                  <p>
                  If you do pass a block, you can render specific templates of your choice:
                  </p>
                  <pre>mail(:to =&gt; 'mikel@test.lindsaar.net') do |format|&#x000A;  format.text&#x000A;  format.html&#x000A;end</pre>
                  <p>
                  You can even render text directly without using a template:
                  </p>
                  <pre>mail(:to =&gt; 'mikel@test.lindsaar.net') do |format|&#x000A;  format.text { render :text =&gt; &quot;Hello Mikel!&quot; }&#x000A;  format.html { render :text =&gt; &quot;&lt;h1&gt;Hello Mikel!&lt;/h1&gt;&quot; }&#x000A;end</pre>
                  <p>
                  Which will render a <tt>multipart/alternative</tt> email with
                  <tt>text/plain</tt> and <tt>text/html</tt> parts.
                  </p>
                  <p>
                  The block syntax also allows you to customize the part headers if desired:
                  </p>
                  <pre>mail(:to =&gt; 'mikel@test.lindsaar.net') do |format|&#x000A;  format.text(:content_transfer_encoding =&gt; &quot;base64&quot;)&#x000A;  format.html&#x000A;end</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000174-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000174-source'>     <span class="ruby-comment cmt"># File vendor/gems/gems/actionmailer-3.0.0.beta/lib/action_mailer/base.rb, line 484</span>&#x000A;484:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mail</span>(<span class="ruby-identifier">headers</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;485:       <span class="ruby-comment cmt"># Guard flag to prevent both the old and the new API from firing</span>&#x000A;486:       <span class="ruby-comment cmt"># Should be removed when old API is removed</span>&#x000A;487:       <span class="ruby-ivar">@mail_was_called</span> = <span class="ruby-keyword kw">true</span>&#x000A;488:       <span class="ruby-identifier">m</span> = <span class="ruby-ivar">@_message</span>&#x000A;489: &#x000A;490:       <span class="ruby-comment cmt"># At the beginning, do not consider class default for parts order neither content_type</span>&#x000A;491:       <span class="ruby-identifier">content_type</span> = <span class="ruby-identifier">headers</span>[<span class="ruby-identifier">:content_type</span>]&#x000A;492:       <span class="ruby-identifier">parts_order</span>  = <span class="ruby-identifier">headers</span>[<span class="ruby-identifier">:parts_order</span>]&#x000A;493: &#x000A;494:       <span class="ruby-comment cmt"># Merge defaults from class</span>&#x000A;495:       <span class="ruby-identifier">headers</span> = <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">reverse_merge</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">default</span>)&#x000A;496:       <span class="ruby-identifier">charset</span> = <span class="ruby-identifier">headers</span>[<span class="ruby-identifier">:charset</span>]&#x000A;497: &#x000A;498:       <span class="ruby-comment cmt"># Quote fields</span>&#x000A;499:       <span class="ruby-identifier">headers</span>[<span class="ruby-identifier">:subject</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">default_i18n_subject</span>&#x000A;500:       <span class="ruby-identifier">quote_fields!</span>(<span class="ruby-identifier">headers</span>, <span class="ruby-identifier">charset</span>)&#x000A;501: &#x000A;502:       <span class="ruby-comment cmt"># Render the templates and blocks</span>&#x000A;503:       <span class="ruby-identifier">responses</span>, <span class="ruby-identifier">explicit_order</span> = <span class="ruby-identifier">collect_responses_and_parts_order</span>(<span class="ruby-identifier">headers</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;504:       <span class="ruby-identifier">create_parts_from_responses</span>(<span class="ruby-identifier">m</span>, <span class="ruby-identifier">responses</span>, <span class="ruby-identifier">charset</span>)&#x000A;505: &#x000A;506:       <span class="ruby-comment cmt"># Finally setup content type and parts order</span>&#x000A;507:       <span class="ruby-identifier">m</span>.<span class="ruby-identifier">content_type</span> = <span class="ruby-identifier">set_content_type</span>(<span class="ruby-identifier">m</span>, <span class="ruby-identifier">content_type</span>, <span class="ruby-identifier">headers</span>[<span class="ruby-identifier">:content_type</span>])&#x000A;508:       <span class="ruby-identifier">m</span>.<span class="ruby-identifier">charset</span>      = <span class="ruby-identifier">charset</span>&#x000A;509: &#x000A;510:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">multipart?</span>&#x000A;511:         <span class="ruby-identifier">parts_order</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">explicit_order</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">headers</span>[<span class="ruby-identifier">:parts_order</span>]&#x000A;512:         <span class="ruby-identifier">m</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">set_sort_order</span>(<span class="ruby-identifier">parts_order</span>)&#x000A;513:         <span class="ruby-identifier">m</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">sort_parts!</span>&#x000A;514:       <span class="ruby-keyword kw">end</span>&#x000A;515: &#x000A;516:       <span class="ruby-comment cmt"># Set configure delivery behavior</span>&#x000A;517:       <span class="ruby-identifier">wrap_delivery_behavior!</span>(<span class="ruby-identifier">headers</span>[<span class="ruby-identifier">:delivery_method</span>])&#x000A;518: &#x000A;519:       <span class="ruby-comment cmt"># Remove headers already treated and assign all others</span>&#x000A;520:       <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">except!</span>(<span class="ruby-identifier">:subject</span>, <span class="ruby-identifier">:to</span>, <span class="ruby-identifier">:from</span>, <span class="ruby-identifier">:cc</span>, <span class="ruby-identifier">:bcc</span>, <span class="ruby-identifier">:reply_to</span>)&#x000A;521:       <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">except!</span>(<span class="ruby-identifier">:body</span>, <span class="ruby-identifier">:parts_order</span>, <span class="ruby-identifier">:content_type</span>, <span class="ruby-identifier">:charset</span>, <span class="ruby-identifier">:delivery_method</span>)&#x000A;522:       <span class="ruby-identifier">headers</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">v</span> }&#x000A;523: &#x000A;524:       <span class="ruby-identifier">m</span>&#x000A;525:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Protected instance methods</h2>
              <div class='method protected-instance' id='method-M000175'>
                <a name='M000175'></a>
                <div class='synopsis'>
                  <span class='name'>set_content_type</span>
                  <span class='arguments'>(m, user_content_type, class_default)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000175-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000175-source'>     <span class="ruby-comment cmt"># File vendor/gems/gems/actionmailer-3.0.0.beta/lib/action_mailer/base.rb, line 529</span>&#x000A;529:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_content_type</span>(<span class="ruby-identifier">m</span>, <span class="ruby-identifier">user_content_type</span>, <span class="ruby-identifier">class_default</span>)&#x000A;530:       <span class="ruby-identifier">params</span> = <span class="ruby-identifier">m</span>.<span class="ruby-identifier">content_type_parameters</span> <span class="ruby-operator">||</span> {}&#x000A;531:       <span class="ruby-keyword kw">case</span>&#x000A;532:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">user_content_type</span>.<span class="ruby-identifier">present?</span>&#x000A;533:         <span class="ruby-identifier">user_content_type</span>&#x000A;534:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">has_attachments?</span>&#x000A;535:         [<span class="ruby-value str">&quot;multipart&quot;</span>, <span class="ruby-value str">&quot;mixed&quot;</span>, <span class="ruby-identifier">params</span>]&#x000A;536:       <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">multipart?</span>&#x000A;537:         [<span class="ruby-value str">&quot;multipart&quot;</span>, <span class="ruby-value str">&quot;alternative&quot;</span>, <span class="ruby-identifier">params</span>]&#x000A;538:       <span class="ruby-keyword kw">else</span>&#x000A;539:         <span class="ruby-identifier">m</span>.<span class="ruby-identifier">content_type</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">class_default</span>&#x000A;540:       <span class="ruby-keyword kw">end</span>&#x000A;541:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>

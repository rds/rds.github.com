<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: ActionView::Helpers::ScriptaculousHelper [Rails Framework Documentation]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Module</span>
          ActionView::Helpers::ScriptaculousHelper
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../../files/vendor/gems/gems/actionpack-3_0_0_beta/lib/action_view/helpers/scriptaculous_helper_rb.html">vendor/gems/gems/actionpack-3.0.0.beta/lib/action_view/helpers/scriptaculous_helper.rb</a>
          </li>
        </ol>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            Provides a set of helpers for calling Scriptaculous JavaScript functions,
            including those which create Ajax controls and visual effects.
            </p>
            <p>
            To be able to use these helpers, you must include the Prototype JavaScript
            framework and the Scriptaculous JavaScript library in your pages. See the
            documentation for <a
            href="JavaScriptHelper.html">ActionView::Helpers::JavaScriptHelper</a> for
            more information on including the necessary JavaScript.
            </p>
            <p>
            The Scriptaculous helpers&#8217; behavior can be tweaked with various
            options. See the documentation at <a
            href="http://script.aculo.us">script.aculo.us</a> for more information on
            using these helpers in your application.
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000542">draggable_element</a></li>
              <li><a href="#M000543">drop_receiving_element</a></li>
              <li><a href="#M000541">sortable_element</a></li>
              <li><a href="#M000540">visual_effect</a></li>
            </ol>
            <h3>protected instance</h3>
            <ol>
              <li><a href="#M000544">array_or_string_for_javascript</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='constants-list'>
              <h2>Constants</h2>
              <div class='name-list'>
                <table summary='Constants'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>TOGGLE_EFFECTS</td>
                    <td>=</td>
                    <td class='context-item-value'>[:toggle_appear, :toggle_slide, :toggle_blind]</td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000542'>
                <a name='M000542'></a>
                <div class='synopsis'>
                  <span class='name'>draggable_element</span>
                  <span class='arguments'>(element_id, options = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Makes the element with the DOM ID specified by <tt>element_id</tt>
                  draggable.
                  </p>
                  <p>
                  Example:
                  </p>
                  <pre>&lt;%= draggable_element(&quot;my_image&quot;, :revert =&gt; true)</pre>
                  <p>
                  You can change the behaviour with various options, see <a
                  href="http://script.aculo.us">script.aculo.us</a> for more documentation.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000542-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000542-source'>     <span class="ruby-comment cmt"># File vendor/gems/gems/actionpack-3.0.0.beta/lib/action_view/helpers/scriptaculous_helper.rb, line 157</span>&#x000A;157:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">draggable_element</span>(<span class="ruby-identifier">element_id</span>, <span class="ruby-identifier">options</span> = {})&#x000A;158:         <span class="ruby-identifier">javascript_tag</span>(<span class="ruby-identifier">draggable_element_js</span>(<span class="ruby-identifier">element_id</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">chop!</span>)&#x000A;159:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000543'>
                <a name='M000543'></a>
                <div class='synopsis'>
                  <span class='name'>drop_receiving_element</span>
                  <span class='arguments'>(element_id, options = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Makes the element with the DOM ID specified by <tt>element_id</tt> receive
                  dropped draggable elements (created by <tt><a
                  href="ScriptaculousHelper.html#M000542">draggable_element</a></tt>). and
                  make an AJAX call. By default, the action called gets the DOM ID of the
                  element as parameter.
                  </p>
                  <p>
                  Example:
                  </p>
                  <pre>&lt;%= drop_receiving_element(&quot;my_cart&quot;, :url =&gt;&#x000A;  { :controller =&gt; &quot;cart&quot;, :action =&gt; &quot;add&quot; }) %&gt;</pre>
                  <p>
                  You can change the behaviour with various options, see <a
                  href="http://script.aculo.us">script.aculo.us</a> for more documentation.
                  </p>
                  <p>
                  Some of these <tt>options</tt> include:
                  </p>
                  <ul>
                  <li><tt>:accept</tt> - Set this to a string or an array of strings describing
                  the allowable CSS classes that the <tt><a
                  href="ScriptaculousHelper.html#M000542">draggable_element</a></tt> must
                  have in order to be accepted by this <tt><a
                  href="ScriptaculousHelper.html#M000543">drop_receiving_element</a></tt>.
                  
                  </li>
                  <li><tt>:confirm</tt> - Adds a confirmation dialog. Example:
                  
                  <pre>:confirm =&gt; &quot;Are you sure you want to do this?&quot;</pre>
                  </li>
                  <li><tt>:hoverclass</tt> - If set, the <tt><a
                  href="ScriptaculousHelper.html#M000543">drop_receiving_element</a></tt>
                  will have this additional CSS class when an accepted <tt><a
                  href="ScriptaculousHelper.html#M000542">draggable_element</a></tt> is
                  hovered over it.
                  
                  </li>
                  <li><tt>:onDrop</tt> - Called when a <tt><a
                  href="ScriptaculousHelper.html#M000542">draggable_element</a></tt> is
                  dropped onto this element. Override this callback with a JavaScript
                  expression to change the default drop behaviour. Example:
                  
                  <pre>:onDrop =&gt; &quot;function(draggable_element, droppable_element, event) { alert('I like bananas') }&quot;</pre>
                  <p>
                  This callback gets three parameters: The Draggable element, the Droppable
                  element and the Event object. You can extract additional information about
                  the drop - like if the Ctrl or Shift keys were pressed - from the Event
                  object.
                  </p>
                  </li>
                  <li><tt>:with</tt> - A JavaScript expression specifying the parameters for the
                  XMLHttpRequest. Any expressions should return a valid URL query string.
                  
                  </li>
                  </ul>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000543-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000543-source'>     <span class="ruby-comment cmt"># File vendor/gems/gems/actionpack-3.0.0.beta/lib/action_view/helpers/scriptaculous_helper.rb, line 202</span>&#x000A;202:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">drop_receiving_element</span>(<span class="ruby-identifier">element_id</span>, <span class="ruby-identifier">options</span> = {})&#x000A;203:         <span class="ruby-identifier">javascript_tag</span>(<span class="ruby-identifier">drop_receiving_element_js</span>(<span class="ruby-identifier">element_id</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">chop!</span>)&#x000A;204:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000541'>
                <a name='M000541'></a>
                <div class='synopsis'>
                  <span class='name'>sortable_element</span>
                  <span class='arguments'>(element_id, options = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Makes the element with the DOM ID specified by <tt>element_id</tt> sortable
                  by drag-and-drop and make an Ajax call whenever the sort order has changed.
                  By default, the action called gets the serialized sortable element as
                  parameters.
                  </p>
                  <p>
                  Example:
                  </p>
                  <pre>&lt;%= sortable_element(&quot;my_list&quot;, :url =&gt; { :action =&gt; &quot;order&quot; }) %&gt;</pre>
                  <p>
                  In the example, the action gets a &#8220;my_list&#8220; array parameter
                  containing the values of the ids of elements the sortable consists of, in
                  the current order.
                  </p>
                  <p>
                  Important: For this to work, the sortable elements must have id attributes
                  in the form &#8220;string_identifier&#8220;. For example,
                  &#8220;item_1&#8220;. Only the identifier part of the id attribute will be
                  serialized.
                  </p>
                  <p>
                  Additional <tt>options</tt> are:
                  </p>
                  <ul>
                  <li><tt>:format</tt> - A regular expression to determine what to send as the
                  serialized id to the server (the default is <tt>/^[^_]*_(.*)$/</tt>).
                  
                  </li>
                  <li><tt>:constraint</tt> - Whether to constrain the dragging to either
                  <tt>:horizontal</tt> or <tt>:vertical</tt> (or false to make it
                  unconstrained).
                  
                  </li>
                  <li><tt>:overlap</tt> - Calculate the item overlap in the <tt>:horizontal</tt>
                  or <tt>:vertical</tt> direction.
                  
                  </li>
                  <li><tt>:tag</tt> - Which children of the container element to treat as
                  sortable (default is <tt>li</tt>).
                  
                  </li>
                  <li><tt>:containment</tt> - Takes an element or array of elements to treat as
                  potential drop targets (defaults to the original target element).
                  
                  </li>
                  <li><tt>:only</tt> - A CSS class name or array of class names used to filter
                  out child elements as candidates.
                  
                  </li>
                  <li><tt>:scroll</tt> - Determines whether to scroll the list during drag
                  operations if the list runs past the visual border.
                  
                  </li>
                  <li><tt>:tree</tt> - Determines whether to treat nested lists as part of the
                  main sortable list. This means that you can create multi-layer lists, and
                  not only sort items at the same level, but drag and sort items between
                  levels.
                  
                  </li>
                  <li><tt>:hoverclass</tt> - If set, the Droppable will have this additional CSS
                  class when an accepted Draggable is hovered over it.
                  
                  </li>
                  <li><tt>:handle</tt> - Sets whether the element should only be draggable by an
                  embedded handle. The value may be a string referencing a CSS class value
                  (as of script.aculo.us V1.5). The first child/grandchild/etc. element found
                  within the element that has this CSS class value will be used as the
                  handle.
                  
                  </li>
                  <li><tt>:ghosting</tt> - Clones the element and drags the clone, leaving the
                  original in place until the clone is dropped (default is <tt>false</tt>).
                  
                  </li>
                  <li><tt>:dropOnEmpty</tt> - If true the Sortable container will be made into a
                  Droppable, that can receive a Draggable (as according to the containment
                  rules) as a child element when there are no more elements inside (default
                  is <tt>false</tt>).
                  
                  </li>
                  <li><tt>:onChange</tt> - Called whenever the sort order changes while dragging.
                  When dragging from one Sortable to another, the callback is called once on
                  each Sortable. Gets the affected element as its parameter.
                  
                  </li>
                  <li><tt>:onUpdate</tt> - Called when the drag ends and the Sortable&#8217;s
                  order is changed in any way. When dragging from one Sortable to another,
                  the callback is called once on each Sortable. Gets the container as its
                  parameter.
                  
                  </li>
                  </ul>
                  <p>
                  See <a href="http://script.aculo.us">script.aculo.us</a> for more
                  documentation.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000541-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000541-source'>     <span class="ruby-comment cmt"># File vendor/gems/gems/actionpack-3.0.0.beta/lib/action_view/helpers/scriptaculous_helper.rb, line 131</span>&#x000A;131:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sortable_element</span>(<span class="ruby-identifier">element_id</span>, <span class="ruby-identifier">options</span> = {})&#x000A;132:         <span class="ruby-identifier">javascript_tag</span>(<span class="ruby-identifier">sortable_element_js</span>(<span class="ruby-identifier">element_id</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">chop!</span>)&#x000A;133:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000540'>
                <a name='M000540'></a>
                <div class='synopsis'>
                  <span class='name'>visual_effect</span>
                  <span class='arguments'>(name, element_id = false, js_options = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Returns a JavaScript snippet to be used on the Ajax callbacks for starting
                  visual effects.
                  </p>
                  <p>
                  If no <tt>element_id</tt> is given, it assumes &#8220;element&#8221; which
                  should be a local variable in the generated JavaScript execution context.
                  This can be used for example with <tt><a
                  href="ScriptaculousHelper.html#M000543">drop_receiving_element</a></tt>:
                  </p>
                  <pre>&lt;%= drop_receiving_element (...), :loading =&gt; visual_effect(:fade) %&gt;</pre>
                  <p>
                  This would fade the element that was dropped on the drop receiving element.
                  </p>
                  <p>
                  For toggling visual effects, you can use <tt>:toggle_appear</tt>,
                  <tt>:toggle_slide</tt>, and <tt>:toggle_blind</tt> which will alternate
                  between appear/fade, slidedown/slideup, and blinddown/blindup respectively.
                  </p>
                  <p>
                  You can change the behaviour with various options, see <a
                  href="http://script.aculo.us">script.aculo.us</a> for more documentation.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000540-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000540-source'>    <span class="ruby-comment cmt"># File vendor/gems/gems/actionpack-3.0.0.beta/lib/action_view/helpers/scriptaculous_helper.rb, line 40</span>&#x000A;40:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visual_effect</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">element_id</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">js_options</span> = {})&#x000A;41:         <span class="ruby-identifier">element</span> = <span class="ruby-identifier">element_id</span> <span class="ruby-value">? </span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">element_id</span>) <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;element&quot;</span>&#x000A;42: &#x000A;43:         <span class="ruby-identifier">js_options</span>[<span class="ruby-identifier">:queue</span>] = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">js_options</span>[<span class="ruby-identifier">:queue</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)&#x000A;44:           <span class="ruby-value str">'{'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">js_options</span>[<span class="ruby-identifier">:queue</span>].<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:limit</span> <span class="ruby-operator">?</span> <span class="ruby-node">&quot;#{k}:#{v}&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot;#{k}:'#{v}'&quot;</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">','</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'}'</span>&#x000A;45:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">js_options</span>[<span class="ruby-identifier">:queue</span>]&#x000A;46:           <span class="ruby-node">&quot;'#{js_options[:queue]}'&quot;</span>&#x000A;47:         <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">js_options</span>[<span class="ruby-identifier">:queue</span>]&#x000A;48: &#x000A;49:         [<span class="ruby-identifier">:endcolor</span>, <span class="ruby-identifier">:direction</span>, <span class="ruby-identifier">:startcolor</span>, <span class="ruby-identifier">:scaleMode</span>, <span class="ruby-identifier">:restorecolor</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">option</span><span class="ruby-operator">|</span>&#x000A;50:           <span class="ruby-identifier">js_options</span>[<span class="ruby-identifier">option</span>] = <span class="ruby-node">&quot;'#{js_options[option]}'&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">js_options</span>[<span class="ruby-identifier">option</span>]&#x000A;51:         <span class="ruby-keyword kw">end</span>&#x000A;52: &#x000A;53:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">TOGGLE_EFFECTS</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>&#x000A;54:           <span class="ruby-node">&quot;Effect.toggle(#{element},'#{name.to_s.gsub(/^toggle_/,'')}',#{options_for_javascript(js_options)});&quot;</span>&#x000A;55:         <span class="ruby-keyword kw">else</span>&#x000A;56:           <span class="ruby-node">&quot;new Effect.#{name.to_s.camelize}(#{element},#{options_for_javascript(js_options)});&quot;</span>&#x000A;57:         <span class="ruby-keyword kw">end</span>&#x000A;58:       <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Protected instance methods</h2>
              <div class='method protected-instance' id='method-M000544'>
                <a name='M000544'></a>
                <div class='synopsis'>
                  <span class='name'>array_or_string_for_javascript</span>
                  <span class='arguments'>(option)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000544-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000544-source'>     <span class="ruby-comment cmt"># File vendor/gems/gems/actionpack-3.0.0.beta/lib/action_view/helpers/scriptaculous_helper.rb, line 221</span>&#x000A;221:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">array_or_string_for_javascript</span>(<span class="ruby-identifier">option</span>)&#x000A;222:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">option</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">Array</span>)&#x000A;223:             <span class="ruby-node">&quot;['#{option.join('\',\'')}']&quot;</span>&#x000A;224:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">option</span>.<span class="ruby-identifier">nil?</span>&#x000A;225:             <span class="ruby-node">&quot;'#{option}'&quot;</span>&#x000A;226:           <span class="ruby-keyword kw">end</span>&#x000A;227:         <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
